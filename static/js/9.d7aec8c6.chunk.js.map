{"version":3,"sources":["application/Singers/style.js","application/Rank/style.js","application/Rank/index.js"],"names":["NavContainer","styled","div","_templateObject","Object","_www_wwwroot_music_app_heheda_top_cloud_music_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0__","ListContainer","_templateObject2","props","play","List","_templateObject3","style","ListItem","_templateObject4","EnterLoading","_templateObject5","Container","taggedTemplateLiteral","ul","globalRank","li","tracks","length","SongList","connect","state","rankList","getIn","loading","songsCount","size","dispatch","getRankListDataDispatch","getRankList","React","memo","list","toJS","useEffect","renderRankList","global","react_default","a","createElement","map","item","index","key","concat","coverImgId","onClick","detail","history","push","id","className","src","coverImgUrl","alt","updateFrequency","first","second","globalStartIndex","filterIndex","officialList","slice","globalList","displayStyle","display","baseUI_scroll","baseUI_loading","renderRoutes","route","routes"],"mappings":"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","file":"static/js/9.d7aec8c6.chunk.js","sourcesContent":["import styled from 'styled-components';\nimport style from '../../assets/global-style';\n\nexport const NavContainer  = styled.div`\n  box-sizing: border-box;\n  position: fixed;\n  top: 95px;\n  width: 100%;\n  padding: 5px;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n`;\n\nexport const ListContainer = styled.div`\n  position: fixed;\n  top: 160px;\n  left: 0;\n  bottom: ${props => props.play ? \"60px\": 0};\n  overflow: hidden;\n  width: 100%;\n`;\n\nexport const List = styled.div`\n  display: flex;\n  margin: auto;\n  flex-direction: column;\n  overflow: hidden;\n  .title {\n    margin:10px 0 10px 10px;\n    color: ${style[\"font-color-desc\"]};\n    font-size: ${style[\"font-size-s\"]};\n  }\n`;\nexport const ListItem = styled.div`\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: row;\n  margin: 0 5px;\n  padding: 5px 0;\n  align-items: center;\n  border-bottom: 1px solid ${style[\"border-color\"]};\n  .img_wrapper {\n    margin-right: 20px;\n    img{\n      border-radius: 3px;\n      width: 50px;\n      height: 50px;\n    }\n  }\n  .name{\n    font-size: ${style[\"font-size-m\"]};\n    color: ${style[\"font-color-desc\"]};\n    font-weight: 500;\n  }\n`;\nexport const EnterLoading = styled.div`\n  position: fixed;\n  left: 0; right: 0; top: 0; bottom: 0;\n  width: 100px;\n  height: 100px;\n  margin: auto;\n`\n","import styled from 'styled-components';\nimport style from '../../assets/global-style';\n\n// Props中的globalRank和tracks.length均代表是否为全球榜\n\nexport const Container = styled.div`\n  position: fixed;\n  top: 90px;\n  bottom: ${props => props.play > 0?\"60px\": 0};\n  width: 100%;\n  .offical,.global {\n    margin: 10px 5px;\n    padding-top: 15px;\n    font-weight: 700;\n    font-size: ${style[\"font-size-m\"]};\n    color: ${style[\"font-color-desc\"]};\n  }\n`\n\nexport const List = styled.ul`\n  margin-top: 10px;\n  padding: 0 5px;\n  display: ${props => props.globalRank ? \"flex\": \"\" };\n  flex-direction: row;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  background: ${style[\"background-color\"]};\n  &::after{\n    content:\"\";\n    display:block;\n    width: 32vw;\n  }\n`\nexport const ListItem = styled.li`\n  display: ${props => props.tracks.length ? \"flex\": \"\"};\n  padding: 3px 0;\n  border-bottom: 1px solid ${style[\"border-color\"]};\n  .img_wrapper{\n    width:  ${props => props.tracks.length ? \"27vw\": \"32vw\"};\n    height: ${props => props.tracks.length ? \"27vw\": \"32vw\"};\n    border-radius: 3px;\n    position: relative;\n    .decorate {\n      position: absolute;\n      bottom: 0;\n      width: 100%;\n      height: 35px;\n      border-radius: 3px;\n      background: linear-gradient(hsla(0,0%,100%,0),hsla(0,0%,43%,.4));\n    }\n    img{\n      width: 100%;\n      height: 100%;\n      border-radius: 3px;\n    }\n    .update_frequecy{\n      position: absolute;\n      left: 7px;\n      bottom: 7px;\n      font-size: ${style[\"font-size-ss\"]};\n      color: ${style[\"font-color-light\"]};\n    }\n  }\n`\nexport const SongList = styled.ul`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  padding: 10px 10px;\n  >li{\n    font-size: ${style[\"font-size-s\"]};\n    color: grey;\n  }\n`","import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { getRankList } from './store/index'\nimport Loading from '../../baseUI/loading';\nimport {\n  List, \n  ListItem,\n  SongList,\n  Container\n} from './style';\nimport Scroll from '../../baseUI/scroll/index';\nimport { EnterLoading } from './../Singers/style';\nimport { filterIndex } from '../../api/utils';\nimport { renderRoutes } from 'react-router-config';\n\nfunction Rank(props) {\n  const { rankList:list, loading, songsCount } = props;\n  const { getRankListDataDispatch } = props;\n\n  let rankList = list ? list.toJS() : [];\n\n  useEffect(() => {\n    if(!rankList.length){\n      getRankListDataDispatch();\n    }\n    // eslint-disable-next-line\n  }, []);\n\n  const enterDetail = (detail) => {\n    props.history.push(`/rank/${detail.id}`)\n  }\n  const renderSongList = (list) => {\n    return list.length ? (\n      <SongList>\n        {\n          list.map((item, index) => {\n            return <li key={index}>{index+1}. {item.first} - {item.second}</li>\n          })\n        }\n      </SongList>\n    ) : null;\n  }\n  const renderRankList = (list, global) => {\n    return (\n      <List globalRank={global}>\n       {\n        list.map((item, index) => {\n          return (\n            <ListItem key={`${item.coverImgId}${index}`} tracks={item.tracks} onClick={() => enterDetail(item)}>\n              <div className=\"img_wrapper\">\n                <img src={item.coverImgUrl} alt=\"\"/>\n                <div className=\"decorate\"></div>\n                <span className=\"update_frequecy\">{item.updateFrequency}</span>\n              </div>\n              { renderSongList(item.tracks)  }\n            </ListItem>\n          )\n       })\n      } \n      </List>\n    )\n  }\n\n  let globalStartIndex = filterIndex(rankList);\n  let officialList = rankList.slice(0, globalStartIndex);\n  let globalList = rankList.slice(globalStartIndex);\n  let displayStyle = loading ? {\"display\":\"none\"}:  {\"display\": \"\"};\n  return (\n    <Container play={songsCount}>\n      <Scroll>\n        <div>\n          <h1 className=\"offical\" style={displayStyle}>官方榜</h1>\n            { renderRankList(officialList) }\n          <h1 className=\"global\" style={displayStyle}>全球榜</h1>\n            { renderRankList(globalList, true) }\n          { loading ? <EnterLoading><Loading></Loading></EnterLoading> : null }\n        </div>\n      </Scroll> \n      {renderRoutes(props.route.routes)}\n    </Container>\n    );\n}\n\n// 映射Redux全局的state到组件的props上\nconst mapStateToProps = (state) => ({\n  rankList: state.getIn(['rank', 'rankList']),\n  loading: state.getIn(['rank', 'loading']),\n  songsCount: state.getIn(['player', 'playList']).size\n});\n// 映射dispatch到props上\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getRankListDataDispatch() {\n      dispatch(getRankList());\n    }\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(React.memo(Rank));"],"sourceRoot":""}