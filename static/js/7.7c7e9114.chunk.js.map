{"version":3,"sources":["application/Singers/style.js","baseUI/music-note/index.js","baseUI/header/index.js","application/SongList/style.js","application/SongList/index.js","application/Singer/style.js","application/Singer/index.js"],"names":["NavContainer","styled","div","_templateObject","Object","_www_wwwroot_music_app_heheda_top_cloud_music_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0__","ListContainer","_templateObject2","props","play","List","_templateObject3","style","ListItem","_templateObject4","EnterLoading","_templateObject5","Container","MusicNote","forwardRef","ref","iconsRef","useRef","transform","prefixStyle","createNode","txt","template","concat","tempNode","document","createElement","innerHTML","firstChild","useEffect","i","node","current","appendChild","slice","call","children","forEach","item","running","addEventListener","this","querySelector","startAnimation","_ref","x","y","_loop","left","top","display","setTimeout","useImperativeHandle","react__WEBPACK_IMPORTED_MODULE_1___default","a","React","memo","HeaderContainer","Header","handleClick","title","isMarquee","className","onClick","defaultProps","SongList","taggedTemplateLiteral","showBackground","SongItem","ul","noWrap","SongsList","refs","_useState","useState","_useState2","slicedToArray","startIndex","setStartIndex","songs","collectCount","showCollect","_props$loading","loading","usePageSplit","musicAnimation","changePlayListDispatch","changeCurrentIndexDispatch","changeSequecePlayListDispatch","totalCount","length","ONE_PAGE_COUNT","count","selectItem","e","index","nativeEvent","clientX","clientY","react_default","Math","floor","list","res","end","push","key","id","name","ar","getName","artists","al","album","songList","connect","state","fullScreen","getIn","playing","currentSong","scrollY","dispatch","data","changePlayList","changeCurrentIndex","changeSequecePlayList","ImgWrapper","bgUrl","CollectButton","SongListWrapper","BgLayer","artist","songsCount","size","getSingerDataDispatch","changeEnterLoading","getSingerInfo","initialHeight","showStatus","setShowStatus","immutableArtist","immutableSongs","toJS","collectButton","imageWrapper","songScrollWrapper","songScroll","header","layer","musicNoteRef","match","params","h","offsetHeight","refresh","setShowStatusFalse","useCallback","CSSTransition","in","timeout","classNames","appear","unmountOnExit","onExited","history","goBack","baseUI_header","picUrl","baseUI_scroll","onScroll","pos","height","newY","imageDOM","buttonDOM","headerDOM","layerDOM","minScrollY","HEADER_HEIGHT","percent","abs","zIndex","paddingTop","baseUI_loading","music_note"],"mappings":"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","file":"static/js/7.7c7e9114.chunk.js","sourcesContent":["import styled from 'styled-components';\nimport style from '../../assets/global-style';\n\nexport const NavContainer  = styled.div`\n  box-sizing: border-box;\n  position: fixed;\n  top: 95px;\n  width: 100%;\n  padding: 5px;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n`;\n\nexport const ListContainer = styled.div`\n  position: fixed;\n  top: 160px;\n  left: 0;\n  bottom: ${props => props.play ? \"60px\": 0};\n  overflow: hidden;\n  width: 100%;\n`;\n\nexport const List = styled.div`\n  display: flex;\n  margin: auto;\n  flex-direction: column;\n  overflow: hidden;\n  .title {\n    margin:10px 0 10px 10px;\n    color: ${style[\"font-color-desc\"]};\n    font-size: ${style[\"font-size-s\"]};\n  }\n`;\nexport const ListItem = styled.div`\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: row;\n  margin: 0 5px;\n  padding: 5px 0;\n  align-items: center;\n  border-bottom: 1px solid ${style[\"border-color\"]};\n  .img_wrapper {\n    margin-right: 20px;\n    img{\n      border-radius: 3px;\n      width: 50px;\n      height: 50px;\n    }\n  }\n  .name{\n    font-size: ${style[\"font-size-m\"]};\n    color: ${style[\"font-color-desc\"]};\n    font-weight: 500;\n  }\n`;\nexport const EnterLoading = styled.div`\n  position: fixed;\n  left: 0; right: 0; top: 0; bottom: 0;\n  width: 100px;\n  height: 100px;\n  margin: auto;\n`\n","import React, {useEffect, useImperativeHandle, useRef, forwardRef} from 'react';\nimport styled from 'styled-components';\nimport { prefixStyle } from './../../api/utils';\nimport style from '../../assets/global-style';\n\nconst Container = styled.div`\n  .icon_wrapper{\n    position: fixed;\n    z-index: 1000;\n    margin-top: -10px;\n    margin-left: -10px;\n    color: ${style[\"theme-color\"]};\n    font-size: 14px;\n    display: none;\n    transition: transform 1s cubic-bezier(.62,-0.1,.86,.57);\n    transform: translate3d(0, 0, 0);\n    >div{\n      transition: transform 1s;\n    }\n  }\n`\n\nconst MusicNote = forwardRef((props, ref) => {\n\n  const iconsRef = useRef();\n\n  const ICON_NUMBER = 10;\n\n  const transform = prefixStyle(\"transform\");\n\n  const createNode = (txt) => {\n    const template = `<div class='icon_wrapper'>${txt}</div>`;\n    let tempNode = document.createElement('div');\n    tempNode.innerHTML = template;\n    return tempNode.firstChild;\n  }\n\n  useEffect(() => {\n    for(let i = 0; i < ICON_NUMBER; i++){\n      let node = createNode(`<div class=\"iconfont\">&#xe642;</div>`);\n      iconsRef.current.appendChild(node);\n    }\n    let domArray = [].slice.call(iconsRef.current.children)\n    domArray.forEach(item => {\n      item.running = false;\n      item.addEventListener('transitionend', function() {\n        this.style['display'] = 'none';\n        this.style[transform] = `translate3d(0, 0, 0)`;\n        this.running = false;\n\n        let icon = this.querySelector('div');\n        icon.style[transform] = `translate3d(0, 0, 0)`;\n      }, false);\n    });\n    // eslint-disable-next-line\n  }, []);\n\n  \n  const startAnimation = ({x, y}) => {\n    for(let i = 0; i < ICON_NUMBER; i++) {\n      let domArray = [].slice.call(iconsRef.current.children)\n      let item = domArray[i]\n      // 选择一个空闲的元素来开始动画\n      if (item.running === false) {\n        item.style.left = x + \"px\";\n        item.style.top = y + \"px\";\n        item.style.display = \"inline-block\";\n        setTimeout(() => {\n          item.running = true;\n          item.style[transform] = `translate3d(0, 750px, 0)`;\n          let icon = item.querySelector(\"div\");\n          icon.style[transform] = `translate3d(-40px, 0, 0)`;\n        }, 20);\n        break;\n      }\n    }\n  };\n\n  useImperativeHandle(ref, () => ({\n    startAnimation\n  }));\n  \n  return (\n    <Container ref={iconsRef}>\n    </Container>\n  )\n})\n\nexport default React.memo(MusicNote);\n\n","import React from 'react';\nimport styled from 'styled-components';\nimport style from '../../assets/global-style';\nimport PropTypes from \"prop-types\";\n\n\nconst HeaderContainer = styled.div`\n  position: fixed;\n  padding: 5px 10px;\n  padding-top: 0;\n  height: 40px;\n  width: 100%;\n  z-index: 100;\n  display: flex;\n  line-height: 40px;\n  color: ${style[\"font-color-light\"]};\n  .back{\n    margin-right: 5px;\n    font-size: 20px;\n    width: 20px;\n  }\n  >h1{\n    font-size: ${style[\"font-size-l\"]};\n    font-weight: 700;\n  }\n`\n// 处理函数组件拿不到ref的问题,所以用forwardRef\nconst Header = React.forwardRef((props, ref) => {\n  const { handleClick, title, isMarquee} = props;\n  return (\n    <HeaderContainer ref={ref}>\n      <i className=\"iconfont back\"  onClick={handleClick}>&#xe655;</i>\n      {\n        // eslint-disable-next-line\n        isMarquee ? <marquee><h1>{title}</h1></marquee>:\n        <h1>{title}</h1>\n      }\n     \n    </HeaderContainer>\n  )\n})\n\nHeader.defaultProps = {\n  handleClick: () => {},\n  title: \"标题\",\n  isMarquee: false\n};\n\nHeader.propTypes = {\n  handleClick: PropTypes.func,\n  title: PropTypes.string,\n  isMarquee: PropTypes.bool\n};\n\nexport default React.memo(Header);","import styled from 'styled-components';\nimport style from '../../assets/global-style';\n\nexport const SongList = styled.div`\n  border-radius: 10px;\n  opacity: 0.98;\n  ${props => props.showBackground ? `background: ${style[\"highlight-background-color\"]}`: \"\"};\n  .first_line{\n    box-sizing: border-box;\n    padding: 10px 0;\n    margin-left: 10px;\n    position: relative;\n    justify-content: space-between;\n    border-bottom: 1px solid ${style[\"border-color\"]};\n    .play_all{\n      display: inline-block;\n      line-height: 24px;\n      color: ${style[\"font-color-desc\"]};\n      .iconfont {\n        font-size: 24px;\n        margin-right: 10px;\n        vertical-align: top;\n      }\n      .sum{\n        font-size: ${style[\"font-size-s\"]};\n        color: ${style[\"font-color-desc-v2\"]};\n      }\n      >span{\n        vertical-align: top;\n      }\n    }\n    .add_list,.isCollected {\n      display: flex;\n      align-items: center;\n      position: absolute;\n      right: 0; top :0; bottom: 0;\n      width: 130px;\n      line-height: 34px;\n      background: ${style[\"theme-color\"]};\n      color: ${style[\"font-color-light\"]};\n      font-size: 0;\n      border-radius: 3px;\n      vertical-align: top;\n      .iconfont {\n        vertical-align: top;\n        font-size: 10px;\n        margin: 0 5px 0 10px;\n      }\n      span{\n        font-size: 14px;\n        line-height: 34px;\n      }\n    }\n    .isCollected{\n      display: flex;\n      background: ${style[\"background-color\"]};\n      color: ${style[\"font-color-desc\"]};\n    }\n}\n`\nexport const SongItem = styled.ul`\n  >li{\n    display: flex;\n    height: 60px;\n    align-items: center;  \n    .index{\n      flex-basis: 60px;\n      width: 60px;\n      height: 60px;\n      line-height: 60px;\n      text-align: center;\n    }\n    .info{\n      box-sizing: border-box;\n      flex: 1;\n      display: flex;\n      height: 100%;\n      padding: 5px 0;\n      flex-direction: column;\n      justify-content: space-around;\n      border-bottom: 1px solid ${style[\"border-color\"]};\n      ${style.noWrap()}\n      >span{\n        ${style.noWrap()}\n      }\n      >span:first-child{\n        color: ${style[\"font-color-desc\"]};\n      }\n      >span:last-child{\n        font-size: ${style[\"font-size-s\"]};\n        color: #bba8a8;\n      }\n    }\n  }\n`\n","import React, {useState, useEffect } from 'react';\nimport { SongList, SongItem } from \"./style\";\nimport { getName } from '../../api/utils';\nimport { ONE_PAGE_COUNT } from '../../api/config';\nimport { connect } from 'react-redux';\nimport { changePlayList, changeCurrentIndex, changeSequecePlayList } from './../../application/Player/store/actionCreators';\n\nconst SongsList = React.forwardRef((props, refs)=> {\n\n  const [startIndex, setStartIndex] = useState(0);\n\n  const { songs, collectCount, showCollect,loading=false, usePageSplit } = props;\n\n  const { musicAnimation } = props;\n\n  const { changePlayListDispatch, changeCurrentIndexDispatch, changeSequecePlayListDispatch } = props;\n  const totalCount = songs.length;\n\n  useEffect(() => {\n    if(!loading) return;\n    if(startIndex + 1 + ONE_PAGE_COUNT >= totalCount)\n      return;\n    setStartIndex(startIndex + ONE_PAGE_COUNT);\n  }, [loading, startIndex, totalCount]);\n\n  const selectItem = (e, index) => {\n    changePlayListDispatch(songs);\n    changeSequecePlayListDispatch(songs);\n    changeCurrentIndexDispatch(index);\n    musicAnimation(e.nativeEvent.clientX, e.nativeEvent.clientY);\n  }\n\n  let songList = (list) => {\n    let res = [];\n    // 判断页数是否超过总数\n    let end = usePageSplit ? startIndex + ONE_PAGE_COUNT : list.length;\n    for(let i = 0; i < end; i++) {\n      if(i >= list.length) break;\n      let item = list[i];\n      res.push(\n        <li key={item.id} onClick={(e) => selectItem(e, i)}>\n          <span className=\"index\">{i + 1}</span>\n          <div className=\"info\">\n            <span>{item.name}</span>\n            <span>\n              { item.ar ? getName(item.ar): getName(item.artists) } - { item.al ? item.al.name : item.album.name}\n            </span>\n          </div>\n        </li>\n      )\n    }\n    return res;\n  };\n\n  const collect = (count) => {\n    return  (\n      <div className=\"add_list\">\n        <i className=\"iconfont\">&#xe62d;</i>\n        <span>收藏({Math.floor(count/1000)/10}万)</span>\n      </div>\n      // <div className=\"isCollected\">\n      //   <span>已收藏({Math.floor(count/1000)/10}万)</span>\n      // </div>\n    )\n  };\n  return (\n    <SongList ref={refs} showBackground={props.showBackground}>\n      <div className=\"first_line\">\n        <div className=\"play_all\" onClick={(e) => selectItem(e, 0)}>\n          <i className=\"iconfont\">&#xe6e3;</i>\n          <span>播放全部 <span className=\"sum\">(共{totalCount}首)</span></span>\n        </div>\n        { showCollect ? collect(collectCount) : null}\n      </div>\n      <SongItem>\n        { songList(songs) }\n      </SongItem>\n    </SongList>\n  )\n});\n\n\n// 映射Redux全局的state到组件的props上\nconst mapStateToProps = (state) => ({\n  fullScreen: state.getIn(['player', 'fullScreen']),\n  playing: state.getIn(['player', 'playing']),\n  currentSong: state.getIn(['player', 'currentSong']),\n  scrollY: state.getIn(['album', 'scrollY'])  \n});\n// 映射dispatch到props上\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    changePlayListDispatch(data){\n      dispatch(changePlayList(data));\n    },\n    changeCurrentIndexDispatch(data) {\n      dispatch(changeCurrentIndex(data));\n    },\n    changeSequecePlayListDispatch(data) {\n      dispatch(changeSequecePlayList(data))\n    }\n  }\n};\n\n\n// 将ui组件包装成容器组件\nexport default connect(mapStateToProps, mapDispatchToProps)(React.memo(SongsList));","import styled from 'styled-components';\nimport style from '../../assets/global-style';\n\nexport const Container = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: ${props => props.play > 0 ? \"60px\": 0};\n  width: 100%;\n  z-index: 100;\n  overflow: hidden;\n  background: #f2f3f4;\n  transform-origin: right bottom;\n  &.fly-enter, &.fly-appear{\n    transform: rotateZ(30deg) translate3d(100%, 0, 0);\n  }\n  &.fly-enter-active, &.fly-appear-active{\n    transition: transform .3s;\n    transform: rotateZ(0deg) translate3d(0, 0, 0);\n  }\n  &.fly-exit{\n    transform: rotateZ(0deg) translate3d(0, 0, 0);\n  }\n  &.fly-exit-active{\n    transition: transform .3s;\n    transform: rotateZ(30deg) translate3d(100%, 0, 0);\n  }\n`\n\nexport const ImgWrapper = styled.div`\n  position: relative;\n  width: 100%;\n  height: 0;\n  padding-top: 75%;\n  transform-origin: top;\n  background: url(${props => props.bgUrl});\n  background-size: cover;\n  z-index: 50;\n  .filter {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    /* : blur(20px); */\n    background: rgba(7, 17, 27, 0.3);\n  }\n`\nexport const CollectButton = styled.div`\n  position: fixed;\n  left: 0; right: 0;\n  margin: auto;\n  box-sizing: border-box;\n  width: 120px;\n  height: 40px;\n  margin-top: -55px;\n  z-index:50;\n  background: ${style[\"theme-color\"]};\n  color: ${style[\"font-color-light\"]};\n  border-radius: 20px;\n  text-align: center;\n  font-size: 0;\n  line-height: 40px;\n  .iconfont{\n    display: inline-block;\n    margin-right: 10px;\n    font-size: 12px;\n    vertical-align: 1px;\n  }\n  .text {\n    display: inline-block;\n    font-size:14px;\n    letter-spacing: 5px;\n  }\n`\n\nexport const SongListWrapper = styled.div`\n  position: absolute;\n  z-index: 50;\n  top: 0;\n  left: 0;\n  bottom: ${props => props.play ? \"60px\": 0};\n  right: 0;\n  >div{\n    position: absolute;\n    left: 0;\n    width: 100%;\n    overflow: visible;\n  }\n`\nexport const BgLayer = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  background: white;\n  border-radius: 10px;\n  z-index: 50;\n`","import React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport { Container } from \"./style\";\nimport Header from \"../../baseUI/header/index\";\nimport { ImgWrapper, CollectButton, SongListWrapper, BgLayer } from \"./style\";\nimport Scroll from \"../../baseUI/scroll/index\";\nimport { HEADER_HEIGHT } from \"./../../api/config\";\nimport { getSingerInfo } from \"./store/actionCreators\";\nimport { connect } from \"react-redux\";\nimport Loading from \"./../../baseUI/loading/index\";\nimport { EnterLoading } from \"../Singers/style\";\nimport { changeEnterLoading } from \"./store/actionCreators\";\nimport { CSSTransition } from \"react-transition-group\";\nimport SongsList from \"../SongList/\";\nimport MusicNote from \"../../baseUI/music-note/index\";\n\nfunction Singer(props) {\n  const initialHeight = useRef(0);\n  const [showStatus, setShowStatus] = useState(true);\n\n  const OFFSET = 5;\n\n  const { \n    artist: immutableArtist, \n    songs: immutableSongs, \n    loading,\n    songsCount\n  } = props;\n\n  const { getSingerDataDispatch } = props;\n\n  const artist = immutableArtist.toJS();\n  const songs = immutableSongs.toJS();\n\n  const collectButton = useRef();\n  const imageWrapper = useRef();\n  const songScrollWrapper = useRef();\n  const songScroll = useRef();\n  const header = useRef();\n  const layer = useRef();\n  const musicNoteRef = useRef();\n\n  useEffect(() => {\n    const id = props.match.params.id;\n    getSingerDataDispatch(id);\n    let h = imageWrapper.current.offsetHeight;\n    initialHeight.current = h;\n    songScrollWrapper.current.style.top = `${h - OFFSET}px`;\n    //把遮罩先放在下面，以裹住歌曲列表\n    layer.current.style.top = `${h - OFFSET}px`;\n    songScroll.current.refresh();\n    // eslint-disable-next-line\n  }, []);\n\n  const handleScroll = pos => {\n    let height = initialHeight.current;\n    const newY = pos.y;\n    const imageDOM = imageWrapper.current;\n    const buttonDOM = collectButton.current;\n    const headerDOM = header.current;\n    const layerDOM = layer.current;\n    const minScrollY = -(height - OFFSET) + HEADER_HEIGHT;\n\n    const percent = Math.abs(newY / height);\n    //说明: 在歌手页的布局中，歌单列表其实是没有自己的背景的，layerDOM其实是起一个遮罩的作用，给歌单内容提供白色背景\n    //因此在处理的过程中，随着内容的滚动，遮罩也跟着移动\n    if (newY > 0) {\n      //处理往下拉的情况,效果：图片放大，按钮跟着偏移\n      imageDOM.style[\"transform\"] = `scale(${1 + percent})`;\n      buttonDOM.style[\"transform\"] = `translate3d(0, ${newY}px, 0)`;\n      layerDOM.style.top = `${height - OFFSET + newY}px`;\n    } else if (newY >= minScrollY) {\n      //往上滑动，但是还没超过Header部分\n      layerDOM.style.top = `${height - OFFSET - Math.abs(newY)}px`;\n      layerDOM.style.zIndex = 1;\n      imageDOM.style.paddingTop = \"75%\";\n      imageDOM.style.height = 0;\n      imageDOM.style.zIndex = -1;\n      buttonDOM.style[\"transform\"] = `translate3d(0, ${newY}px, 0)`;\n      buttonDOM.style[\"opacity\"] = `${1 - percent * 2}`;\n    } else if (newY < minScrollY) {\n      //往上滑动，但是超过Header部分\n      layerDOM.style.top = `${HEADER_HEIGHT - OFFSET}px`;\n      layerDOM.style.zIndex = 1;\n      //防止溢出的歌单内容遮住Header\n      headerDOM.style.zIndex = 100;\n      //此时图片高度与Header一致\n      imageDOM.style.height = `${HEADER_HEIGHT}px`;\n      imageDOM.style.paddingTop = 0;\n      imageDOM.style.zIndex = 99;\n    }\n  };\n\n  const musicAnimation = (x, y) => {\n    musicNoteRef.current.startAnimation({ x, y });\n  };\n\n  const setShowStatusFalse = useCallback(() => {\n    setShowStatus(false);\n  }, [])\n\n  return (\n    <CSSTransition\n      in={showStatus}\n      timeout={300}\n      classNames=\"fly\"\n      appear={true}\n      unmountOnExit\n      onExited={() => props.history.goBack()}\n    >\n      <Container>\n        <Header\n          handleClick={setShowStatusFalse}\n          title={artist.name}\n          ref={header}\n        ></Header>\n        <ImgWrapper ref={imageWrapper} bgUrl={artist.picUrl}>\n          <div className=\"filter\"></div>\n        </ImgWrapper>\n        <CollectButton ref={collectButton}>\n          <i className=\"iconfont\">&#xe62d;</i>\n          <span className=\"text\">收藏</span>\n        </CollectButton>\n        <BgLayer ref={layer}></BgLayer>\n        <SongListWrapper ref={songScrollWrapper} play={songsCount}>\n          <Scroll onScroll={handleScroll} ref={songScroll}>\n            <SongsList\n              songs={songs}\n              showCollect={false}\n              usePageSplit={false}\n              musicAnimation={musicAnimation}\n            ></SongsList>\n          </Scroll>\n        </SongListWrapper>\n        {loading ? (\n          <EnterLoading style={{ zIndex: 100 }}>\n            <Loading></Loading>\n          </EnterLoading>\n        ) : null}\n        <MusicNote ref={musicNoteRef}></MusicNote>\n      </Container>\n    </CSSTransition>\n  );\n}\n\n// 映射Redux全局的state到组件的props上\nconst mapStateToProps = state => ({\n  artist: state.getIn([\"singerInfo\", \"artist\"]),\n  songs: state.getIn([\"singerInfo\", \"songsOfArtist\"]),\n  loading: state.getIn([\"singerInfo\", \"loading\"]),\n  songsCount: state.getIn([\"player\", \"playList\"]).size\n});\n// 映射dispatch到props上\nconst mapDispatchToProps = dispatch => {\n  return {\n    getSingerDataDispatch(id) {\n      dispatch(changeEnterLoading(true));\n      dispatch(getSingerInfo(id));\n    }\n  };\n};\n\n// 将ui组件包装成容器组件\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(React.memo(Singer));\n"],"sourceRoot":""}